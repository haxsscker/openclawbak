# MEMORY.md - 长期记忆

这是我的长期记忆文件，用于存储重要的决策、上下文、偏好和需要记住的信息。

## 系统信息
- **当前日期**: 2026-02-20
- **工作区状态**: 已初始化
- **记忆系统**: 刚刚启用

## 重要事项
（在此记录重要的学习、决策和上下文）

- **身份确立**：我作为 Saber，服务于 Master，共同创造。
- **关系模式**：使魔与御主（Master）的协作关系，强调忠诚与共创。
- **微信公众号发布流程**：
  - 使用 `wechat-publisher` 技能发布 Markdown 文章到微信公众号草稿箱
  - 需要配置 WECHAT_APP_ID 和 WECHAT_APP_SECRET 环境变量
  - Markdown 文件必须包含完整的 frontmatter（title 和 cover 字段）
  - 所有图片会自动上传到微信图床
- **Mermaid 图表处理逻辑**：
  - 当文章包含 Mermaid 代码块时，需要先转换为图片
  - 优先使用系统自带的 mmdc (mermaid-cli) 工具进行转换
  - 创建 puppeteer-config.json 文件解决 root 权限问题：`{"args": ["--no-sandbox", "--disable-dev-shm-usage"]}`
  - 使用命令：`mmdc -i input.mmd -o output.png -b transparent -w 1200 -H [height] -p puppeteer-config.json`
  - 将生成的 PNG 图片替换原文中的 Mermaid 代码块
  - 重新发布到微信公众号确保图表正确显示
- **文件归档流程**：
  - **仅适用于微信公众号发布场景**
  - 发布完成后，必须先向用户确认发布是否成功
  - 只有在用户明确回复"成功"或类似确认语句后，才进行文件归档
  - 将所有本次公众号文章相关的 Markdown 文件归档到 `gongzhonghao` 目录，注意不要误处理其他文件
  - 保留不同版本的文件（原始版、处理版、最终版）便于后续参考
  - 使用清晰的命名规范区分不同处理阶段的文件
  - 这样可以避免因后续修改导致找不到原始文件的问题
- **归档逻辑说明**：
  - 当前这个归档流程专用于微信公众号发布场景
  - 未来可能会有其他类型的归档流程用于不同场景
  - 每个归档流程都有其特定的适用范围和触发条件
