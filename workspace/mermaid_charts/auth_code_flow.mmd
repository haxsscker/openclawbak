sequenceDiagram
    autonumber
    participant User as 用户
    participant Client as 客户端应用
    participant AuthServer as 授权服务器
    participant ResServer as 资源服务器
    
    Client->>AuthServer: ① 发起令牌请求<br/>GET /authorize?client_id=...&response_type=code&scope=...&redirect_uri=...
    AuthServer->>AuthServer: ② 验证客户端 client_id
    AuthServer->>User: ③ 展示登录页面
    User->>AuthServer: ④ 提交用户名和密码
    AuthServer->>AuthServer: ⑤ 验证用户凭据
    AuthServer->>User: ⑥ 请求用户授权<br/>（展示权限范围，如：分享推文、读取个人信息）
    User->>AuthServer: ⑦ 用户同意授权
    AuthServer->>Client: ⑧ 返回授权码 authorization_code<br/>重定向到 redirect_uri
    Client->>AuthServer: ⑨ 用授权码换取令牌<br/>POST /token（authorization_code + client_id + client_secret）
    AuthServer->>AuthServer: ⑩ 验证 client_id、client_secret、authorization_code
    AuthServer->>Client: ⑪ 返回 Access Token
    Client->>ResServer: ⑫ 携带令牌请求受保护资源<br/>Authorization: Bearer [token]
    ResServer->>ResServer: ⑬ 验证令牌有效性
    ResServer->>Client: ⑭ 返回受保护的资源数据